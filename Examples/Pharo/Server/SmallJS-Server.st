Object subclass: #SmalljsServer	instanceVariableNames: 'znServer'	classVariableNames: ''	package: 'SmallJS-Server'!!SmalljsServer commentStamp: '2024-09-14 19:53' prior: 0!Server for SmallJS example Pharo client app.!!SmalljsServer methodsFor: 'event handling' stamp: '9/17/2024 20:38'!handleRequest: request	| requestString | 	requestString := request uri asString.	requestString = '/hello' ifTrue: [		^ self onHello ].		Transcript cr; show: 'SmalljsServer: Bad request: ', requestString.	^ ZnResponse badRequest: request.	! !!SmalljsServer methodsFor: 'event handling' stamp: '9/18/2024 22:51'!onHello 	Transcript cr; show: 'SmalljsServer: Responding to hello request'.	^ ZnResponse ok: ( 		ZnEntity text: (			STONJSON toString: { #message->'Hello from Pharo!!' } asDictionary ) ).! !!SmalljsServer methodsFor: 'starting' stamp: '9/22/2024 19:28'!start	self stop.			( ZnServer startDefaultOn: 3000 ) delegate:	   	( ZnStaticFileDecoratorDelegate			decorate: self class new	  		servingFilesFrom: self webFolder ).! !!SmalljsServer methodsFor: 'starting' stamp: '9/22/2024 16:14'!stop 	ZnServer default ifNotNil: [		 ZnServer default stop.		( Delay forSeconds: 1 ) wait. ].! !!SmalljsServer methodsFor: 'starting' stamp: '9/22/2024 19:27'!webFolder 	^ Smalltalk os environment at: 'pharoWeb'		ifAbsent: [ self error: 'Environment variable "pharoWeb" not set' ].! !