PackageManifest subclass: #ManifestSmallJSServer	instanceVariableNames: ''	classVariableNames: ''	package: 'SmallJS-Server-Manifest'!!ManifestSmallJSServer commentStamp: '2024-09-21 12:13' prior: 0!This package contains an example web server app,with a static file server based on Zincand a single web API at URL '/hello'.!"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ManifestSmallJSServer class	instanceVariableNames: ''!!ManifestSmallJSServer class commentStamp: '2024-09-21 12:13' prior: 0!This package contains an example web server app,with a static file server based on Zincand a single web API at URL '/hello'.!!ManifestSmallJSServer class methodsFor: 'code-critics' stamp: '9/17/2024 20:38'!ruleCascadedNextPutAllsRuleV1FalsePositive	<ignoreForCoverage>	^ #(#(#(#RGMethodDefinition #(#SmalljsServer #handleRequest: #false)) #'2024-09-17T20:38:05.798+02:00') #(#(#RGClassDefinition #(#SmalljsServer)) #'2024-09-17T20:38:26.932+02:00') )! !!ManifestSmallJSServer class methodsFor: 'code-critics' stamp: '9/18/2024 22:58'!ruleRefersToClassRuleV1FalsePositive	<ignoreForCoverage>	^ #(#(#(#RGMethodDefinition #(#SmalljsServer #start #false)) #'2024-09-18T22:58:19.259+02:00') )! !Object subclass: #SmalljsServer	instanceVariableNames: 'znServer'	classVariableNames: ''	package: 'SmallJS-Server'!!SmalljsServer commentStamp: '2024-09-14 19:53' prior: 0!Server for SmallJS example Pharo client app.!!SmalljsServer methodsFor: 'event handling' stamp: '9/17/2024 20:38'!handleRequest: request	| requestString | 	requestString := request uri asString.	requestString = '/hello' ifTrue: [		^ self onHello ].		Transcript cr; show: 'SmalljsServer: Bad request: ', requestString.	^ ZnResponse badRequest: request.	! !!SmalljsServer methodsFor: 'event handling' stamp: '9/18/2024 22:51'!onHello 	Transcript cr; show: 'SmalljsServer: Responding to hello request'.	^ ZnResponse ok: ( 		ZnEntity text: (			STONJSON toString: { #message->'Hello from Pharo!!' } asDictionary ) ).! !!SmalljsServer methodsFor: 'starting' stamp: '9/22/2024 19:28'!start	self stop.			( ZnServer startDefaultOn: 3000 ) delegate:	   	( ZnStaticFileDecoratorDelegate			decorate: self class new	  		servingFilesFrom: self webFolder ).! !!SmalljsServer methodsFor: 'starting' stamp: '11/20/2024 22:03'!stop 	ZnServer default ifNotNil: [		 ZnServer default stop.		( Delay forSeconds: 2 ) wait. ].! !!SmalljsServer methodsFor: 'starting' stamp: '9/22/2024 19:27'!webFolder 	^ Smalltalk os environment at: 'pharoWeb'		ifAbsent: [ self error: 'Environment variable "pharoWeb" not set' ].! !